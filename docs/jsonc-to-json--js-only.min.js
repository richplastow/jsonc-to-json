#!/usr/bin/env node
const n=n=>{let s=n.length-1;for(;s>=0;){const e=n[s];if(" "!==e&&"\t"!==e){if("\n"===e||"\r"===e)break;break}n.pop(),s-=1}},s=(n,s)=>{const{length:e}=n;let t=s;for(;t<e;){const s=n[t];if(" "!==s&&"\t"!==s&&"\n"!==s&&"\r"!==s)return t;t+=1}return-1},e=(n,s={})=>{let e;s.debug&&(e=performance.now());const o=t(n);if(!s.debug)return o;const r=performance.now()-e;return{buildVariant:"js-only.min",implementationUsed:"js",json:o,lengthInput:n.length,lengthOutput:o.length,processingTimeMs:r.toFixed(3),version:"1.1.0"}},t=e=>{const t=(s=>{const e=[],{length:t}=s;let o=0,r=!1,i='"';for(;o<t;){const c=s[o];if(r){if(e.push(c),"\\"===c&&o+1<t){e.push(s[o+1]),o+=2;continue}c===i&&(r=!1),o+=1}else if('"'!==c&&"'"!==c){if("/"===c&&o+1<t){const r=s[o+1];if("/"===r){for(n(e),o+=2;o<t;){const n=s[o];if("\r"===n){e.push("\r"),o+=1,"\n"===s[o]&&(e.push("\n"),o+=1);break}if("\n"===n){e.push("\n"),o+=1;break}o+=1}continue}if("*"===r){for(n(e),o+=2;o<t;){const n=s[o];if("*"===n&&"/"===s[o+1]){o+=2;break}"\r"!==n?("\n"!==n||e.push("\n"),o+=1):(e.push("\r"),o+=1,"\n"===s[o]&&(e.push("\n"),o+=1))}continue}}e.push(c),o+=1}else r=!0,i=c,e.push(c),o+=1}return e.join("")})(e),o=(n=>{const e=[],{length:t}=n;let o=0,r=!1,i='"';for(;o<t;){const c=n[o];if(r){if(e.push(c),"\\"===c&&o+1<t){e.push(n[o+1]),o+=2;continue}c===i&&(r=!1),o+=1}else if('"'!==c&&"'"!==c){if(","===c){const e=s(n,o+1);if(-1===e||"}"===n[e]||"]"===n[e]){o+=1;continue}}e.push(c),o+=1}else r=!0,i=c,e.push(c),o+=1}return e.join("")})(t);return(n=>{const s=[],e=[],{length:t}=n;let o=0,r=!1;for(;o<t;){const i=n[o];if("\r"===i||"\n"===i){const c=[i];"\r"===i&&o+1<t&&"\n"===n[o+1]&&(c.push("\n"),o+=1),r&&s.push(...e,...c),e.length=0,r=!1,o+=1;continue}e.push(i)," "!==i&&"\t"!==i&&(r=!0),o+=1}return r&&s.push(...e),s.join("")})(o)};if("object"==typeof process&&Array.isArray(process.argv)){const[,n,s]=process.argv;if(n&&n.endsWith("jsonc-to-json--js-only.js"))if(s){const n=e(s);console.log(n)}else{let n="";process.stdin.on("data",s=>{n+=s}),process.stdin.on("end",()=>{const s=e(n);console.log(s)})}}export{e as jsoncToJson};
